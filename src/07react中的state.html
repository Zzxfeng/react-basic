<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>react状态机</title>
		<script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
		<script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
		<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
	</head>
	<body>
		<div id="container"></div>
        <script type="text/babel">
            /**
             * react 状态机State类似于vue中的data
             * State变化会触发生命周期componentDidMount和componentWillUnmount
             * */
            class Clock extends React.Component{
                constructor(props){
                    super(props);
                    this.state = {date:new Date()}
                }
                componentDidMount(){
                    this.timer = setInterval(()=>this.tick(),1000)
                }
                componentWillUnmount(){
                    console.log(componentWillUnmount)
                    clearInterval(this.timer)
                }
                tick(){
                    this.setState({
                        date:new Date()
                    })
                }
                render(){
                    return (
                        <h1>现在是：{this.state.date.toLocaleTimeString()}</h1>
                    )
                }
            }
			ReactDOM.render(
				<Clock/>,
				document.getElementById("container")
			);
		</script>
	</body>
</html>